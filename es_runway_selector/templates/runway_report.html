<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Runway Report</title>
        <style>
         :root {
             --bg:#0b0f14;
             --panel:#111824;
             --text:#e7eef8;
             --muted:#9aa7b8;
             --border:#243246;
             --accent:#67b7ff;
             --bad:#ff7a7a;
             --wind-pair-gap: 2px;
             --wind-group-gap: 10px;
             --wind-icon-size: 13px;
             --components-to-metar-gap: 8px;
         }

         * { box-sizing: border-box; }

         body {
             background: var(--bg);
             color: var(--text);
             font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
             margin: 0;
             padding: 14px;
             font-size: 13px;
         }

         h1 {
             margin: 0 0 8px;
             font-size: 16px;
             font-weight: 600;
         }

         .card {
             background: var(--panel);
             border: 1px solid var(--border);
             border-radius: 8px;
             padding: 8px 10px 10px;
             margin-bottom: 10px;
         }

         header {
             display:flex;
             justify-content: space-between;
             align-items: baseline;
             gap: 8px;
             margin-bottom: 6px;
         }

         .none { color: var(--bad); font-weight: 600; }

         .badge {
             font-size: 11px;
             color: var(--muted);
             border: 1px solid var(--border);
             padding: 1px 6px;
             border-radius: 999px;
             white-space: nowrap;
         }

         .table-wrap {
             border: 1px solid var(--border);
             border-radius: 6px;
             overflow: hidden;
             background: rgba(0,0,0,.15);
         }

         table {
             width: 100%;
             border-collapse: collapse;
             table-layout: fixed;
         }

         thead th {
             text-align: left;
             font-size: 11px;
             color: var(--muted);
             padding: 4px 6px;
             border-bottom: 1px solid var(--border);
             background: rgba(0,0,0,.25);
             position: sticky;
             top: 0;
         }

         thead th:last-child {
             padding-left: var(--components-to-metar-gap);
         }

         tbody td {
             padding: 0px 2px;
             border-bottom: 1px dashed rgba(255,255,255,.08);
             vertical-align: top;
         }

         tbody tr:last-child td { border-bottom: none; }

         .icao {
             color: var(--accent);
             font-weight: 600;
             font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
             white-space: nowrap;
             vertical-align: middle;
         }

         .runways {
             font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
             white-space: pre-wrap;
         }

         .wind {
             font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
             white-space: nowrap;
             font-variant-numeric: tabular-nums;
             text-align: center;
             vertical-align: middle;
             line-height: 1;
         }

         td.wind {
             padding-top: 2px !important;
             padding-bottom: 2px !important;
             padding-left: 0 !important;
             padding-right: 0 !important;
         }

         .wind-sym {
             padding-left: 0 !important;
             padding-right: 0 !important;
         }

         .wind-val {
             padding-left: 0 !important;
             padding-right: 0 !important;
         }

         .wind-head-arrow,
         .wind-cross-left {
             text-align: right;
             padding-right: var(--wind-pair-gap) !important;
         }

         .wind-head-value {
             text-align: center;
             padding-right: var(--wind-group-gap) !important;
             padding-left: 0 !important;
         }

         .wind-cross-left {
             padding-left: 0 !important;
         }

         .wind-cross-value {
             text-align: center;
             padding-right: var(--wind-pair-gap) !important;
             padding-left: 0 !important;
         }

         .wind-cross-right {
             text-align: left;
             padding-left: 0 !important;
         }

         .wind-icon {
             width: var(--wind-icon-size);
             height: var(--wind-icon-size);
             display: inline-block;
             vertical-align: middle;
         }

         .wind-icon use {
             stroke: currentColor;
             fill: none;
             stroke-width: 1.7;
             stroke-linecap: round;
             stroke-linejoin: round;
         }

         .wind-icon.calm use {
             stroke-width: 1.4;
         }

         .metar {
             font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
             white-space: pre-wrap;
             word-break: break-word;
             line-height: 1.1;
             font-size: 12px;
             vertical-align: middle;
             padding-left: var(--components-to-metar-gap);
         }

         .comp-width { width: 20ch; }

         /* column sizing */
         col.col-icao  { width: 6ch; }
         col.col-rwy   { width: 20ch; }
         col.col-wind-h-arrow { width: 18px; }
         col.col-wind-h-val { width: 3ch; }
         col.col-wind-x-left { width: 18px; }
         col.col-wind-x-val { width: 3ch; }
         col.col-wind-x-right { width: 18px; }
         col.col-metar { width: auto; }

         th.comp-width {
             text-align: center;
             width: 13ch;
         }
        </style>
    </head>
    <body>
        <svg width="0" height="0" aria-hidden="true" focusable="false" style="position:absolute;left:-9999px;overflow:hidden">
            <defs>
                <symbol id="wind-icon-up" viewBox="0 0 16 16">
                    <path d="M8 14V3"></path>
                    <path d="M4.5 6.5 8 3l3.5 3.5"></path>
                </symbol>
                <symbol id="wind-icon-down" viewBox="0 0 16 16">
                    <path d="M8 2v11"></path>
                    <path d="M4.5 9.5 8 13l3.5-3.5"></path>
                </symbol>
                <symbol id="wind-icon-right" viewBox="0 0 16 16">
                    <path d="M2 8h11"></path>
                    <path d="M9.5 4.5 13 8l-3.5 3.5"></path>
                </symbol>
                <symbol id="wind-icon-left" viewBox="0 0 16 16">
                    <path d="M14 8H3"></path>
                    <path d="M6.5 4.5 3 8l3.5 3.5"></path>
                </symbol>
                <symbol id="wind-icon-calm" viewBox="0 0 16 16">
                    <circle cx="8" cy="8" r="4.5"></circle>
                </symbol>
            </defs>
        </svg>
        {% for g in groups %}
        <section class="card">
            <header>
                <div class="{{ g.source_class }}">{{ g.source_label }}</div>
                <div class="badge">{{ g.airports.len() }} airports</div>
            </header>

            <div class="table-wrap">
                <table>
                    <colgroup>
                        <col class="col-icao">
                        <col class="col-rwy">
                        <col class="col-wind-h-arrow">
                        <col class="col-wind-h-val">
                        <col class="col-wind-x-left">
                        <col class="col-wind-x-val">
                        <col class="col-wind-x-right">
                        <col class="col-metar">
                    </colgroup>
                    <thead>
                        <tr>
                            <th>ICAO</th>
                            <th>Runways</th>
                            <th colspan="5" class="comp-width">Components</th>
                            <th>METAR</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for a in g.airports %}
                        <tr>
                            <td class="icao">{{ a.icao }}</td>
                            <td class="runways">{{ a.runway_text }}</td>
                            <td class="wind wind-sym wind-head-arrow">
                                {% if a.wind_head_arrow_text == "↑" %}
                                <svg class="wind-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-up"></use></svg>
                                {% elif a.wind_head_arrow_text == "↓" %}
                                <svg class="wind-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-down"></use></svg>
                                {% elif a.wind_head_arrow_text == "○" %}
                                <svg class="wind-icon calm" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-calm"></use></svg>
                                {% else %}
                                {{ a.wind_head_arrow_text }}
                                {% endif %}
                            </td>
                            <td class="wind wind-val wind-head-value">{{ a.wind_head_value_text }}</td>
                            <td class="wind wind-sym wind-cross-left">
                                {% if a.wind_cross_left_arrow_text == "→" %}
                                <svg class="wind-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-right"></use></svg>
                                {% elif a.wind_cross_left_arrow_text == "○" %}
                                <svg class="wind-icon calm" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-calm"></use></svg>
                                {% else %}
                                {{ a.wind_cross_left_arrow_text }}
                                {% endif %}
                            </td>
                            <td class="wind wind-val wind-cross-value">
                                {% if a.wind_cross_value_text == "○" %}
                                <svg class="wind-icon calm" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-calm"></use></svg>
                                {% else %}
                                {{ a.wind_cross_value_text }}
                                {% endif %}
                            </td>
                            <td class="wind wind-sym wind-cross-right">
                                {% if a.wind_cross_right_arrow_text == "←" %}
                                <svg class="wind-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-left"></use></svg>
                                {% elif a.wind_cross_right_arrow_text == "○" %}
                                <svg class="wind-icon calm" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><use href="#wind-icon-calm"></use></svg>
                                {% else %}
                                {{ a.wind_cross_right_arrow_text }}
                                {% endif %}
                            </td>
                            <td class="metar">{{ a.metar }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endfor %}

    </body>
</html>
